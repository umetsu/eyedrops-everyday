# eyedrops-everyday アプリケーション仕様書

## プロジェクト概要

### 目的
緑内障などにより毎日の点眼が必要な患者が、点眼を忘れないようにサポートするスマートフォンアプリケーション

### 想定ユーザー
- 緑内障などにより毎日の点眼が必要な一般ユーザー
- 30代後半以降
- 目薬は1種類を使用
- 点眼は1日に1回

## 主要機能

### 1. 点眼履歴管理
- **カレンダーUI**: 月間カレンダー形式で点眼実施状況を視覚的に確認
- **状態表示**: 
  - 実施済み: 緑色のマーク
  - 未実施: グレーまたは空白
  - 当日: 強調表示
- **履歴詳細**: 各日付をタップして詳細情報を確認

### 2. 点眼状態切替
- **ワンタップ操作**: シンプルなボタンで「実施済み」「未実施」を切替
- **確認ダイアログ**: 誤操作防止のための確認画面
- **タイムスタンプ**: 実施時刻の自動記録

### 3. リマインダー機能
- **時刻設定**: ユーザーが指定した時間に通知
- **通知内容**: 「点眼の時間です」などのシンプルなメッセージ
- **スヌーズ機能**: 5分、10分、15分後の再通知オプション
- **通知設定**: ON/OFF切替、音量調整

### 4. 眼圧履歴管理
- **データ入力**: 眼圧値の手動入力（mmHg単位）
- **グラフ表示**: 
  - 折れ線グラフで推移を表示
  - 期間選択（1ヶ月、3ヶ月、6ヶ月、1年）
  - 正常値範囲の表示
- **統計情報**: 平均値、最高値、最低値の表示

## 技術仕様

### プラットフォーム
- **主要対象**: Android
- **フレームワーク**: Flutter
- **最小対応バージョン**: Android 7.0 (API level 24)

### データ管理
- **ローカルストレージ**: SQLite（sqflite パッケージ使用）
- **データ構造**:
  ```sql
  -- 点眼記録テーブル
  CREATE TABLE eyedrop_records (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    date TEXT NOT NULL,
    completed BOOLEAN NOT NULL,
    timestamp TEXT
  );
  
  -- 眼圧記録テーブル
  CREATE TABLE pressure_records (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    date TEXT NOT NULL,
    pressure_value REAL NOT NULL,
    timestamp TEXT NOT NULL
  );
  
  -- 設定テーブル
  CREATE TABLE settings (
    key TEXT PRIMARY KEY,
    value TEXT NOT NULL
  );
  ```

### 使用パッケージ（予定）
- `sqflite`: ローカルデータベース
- `flutter_local_notifications`: プッシュ通知
- `table_calendar`: カレンダーUI
- `fl_chart`: グラフ表示
- `shared_preferences`: 設定保存

## デザイン仕様

### カラーパレット
- **プライマリカラー**: 深緑 (#2E7D32)
- **セカンダリカラー**: ライトグリーン (#81C784)
- **アクセントカラー**: ダークグリーン (#1B5E20)
- **背景色**: ホワイト (#FFFFFF)
- **テキストカラー**: ダークグレー (#424242)

### デザインコンセプト
- **シンプル**: 必要最小限の機能に絞った直感的なUI
- **わかりやすさ**: 大きなボタン、明確なアイコン
- **視認性**: 高コントラスト、読みやすいフォントサイズ

### 画面構成
1. **ホーム画面**: 今日の点眼状況、クイックアクション
2. **カレンダー画面**: 月間履歴表示
3. **眼圧記録画面**: データ入力とグラフ表示
4. **設定画面**: 通知時刻、その他設定

## 非機能要件

### セキュリティ
- ログイン機能なし
- データはローカル保存のみ
- 外部通信なし

### パフォーマンス
- アプリ起動時間: 3秒以内
- 画面遷移: 1秒以内
- データ保存: 即座に反映

### ユーザビリティ
- 片手操作可能なUI
- 文字サイズ: 最小16sp
- タップ領域: 最小44dp

## 開発フェーズ

### Phase 1: 基本機能
- プロジェクト初期設定
- データベース設計・実装
- 基本UI構築
- 点眼記録機能

### Phase 2: カレンダー機能
- カレンダーUI実装
- 履歴表示機能
- 状態切替機能

### Phase 3: 通知機能
- リマインダー設定
- プッシュ通知実装
- 設定画面

### Phase 4: 眼圧管理
- 眼圧データ入力
- グラフ表示機能
- 統計情報表示

### Phase 5: 最終調整
- UI/UX改善
- パフォーマンス最適化
- テスト・デバッグ

## 今後の拡張可能性

### 将来的な機能追加候補
- 複数の目薬対応
- 医師との情報共有機能
- データエクスポート機能
- 服薬記録機能
- 症状記録機能

### 技術的拡張
- iOS対応
- クラウド同期機能
- ウェアラブルデバイス連携
